<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>네모 | 중개사 광고 상품 결제</title>
  <meta name="description" content="네모 중개사 광고 상품을 간편하게 결제하세요.">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/payment.css">
</head>
<body>
  <!-- 간단한 헤더 -->
  <header class="payment-header">
    <div class="payment-nav">
      <a href="index.html" class="logo">
        <span class="logo-text">네모</span>
      </a>
      <h1 class="payment-title">중개사 광고 상품 결제</h1>
    </div>
  </header>

  <!-- 메인 콘텐츠 -->
  <main class="payment-main">
    <div class="payment-container">
      
      <div class="payment-content">
        <!-- 1단계: 상품 정보 -->
        <section class="payment-section">
          <div class="section-header">
            <div class="section-number">1</div>
            <h2 class="section-title">상품 정보</h2>
          </div>
          
          <!-- 상품 선택 버튼 -->
          <div class="product-selector">
            <button type="button" class="select-product-btn" id="selectProductBtn">
              <div class="select-icon">🔍</div>
              <div class="select-text">
                <span class="select-title">광고 상품 선택하기</span>
                <span class="select-desc">원하는 지역과 상품을 검색해보세요</span>
              </div>
              <div class="select-arrow">→</div>
            </button>
          </div>

          <!-- 선택된 상품 정보 -->
          <div class="product-summary" id="selectedProduct" style="display: none;">
            <div class="product-image">
              <div class="image-placeholder">📊</div>
            </div>
            <div class="product-details">
              <h3 class="product-name" id="selectedProductName">상품을 선택해주세요</h3>
              <p class="product-desc" id="selectedProductDesc">광고하실 상품을 검색하여 선택해주세요</p>
              <div class="product-features" id="selectedProductFeatures">
                <span class="feature-badge">네모+직방 동시 노출</span>
                <span class="feature-badge">상위 노출 보장</span>
                <span class="feature-badge">24시간 고객지원</span>
              </div>
              <div class="product-specs" id="selectedProductSpecs">
                <div class="spec-item">
                  <span class="spec-label">광고 기간</span>
                  <span class="spec-value" id="specDuration">1개월 (30일)</span>
                </div>
                <div class="spec-item">
                  <span class="spec-label">광고 지역</span>
                  <span class="spec-value" id="specLocation">지역을 선택해주세요</span>
                </div>
                <div class="spec-item">
                  <span class="spec-label">상품 유형</span>
                  <span class="spec-value" id="specType">상품을 선택해주세요</span>
                </div>
              </div>
              <div class="product-actions">
                <button type="button" class="change-product-btn" id="changeProductBtn">
                  다른 상품 선택하기
                </button>
              </div>
            </div>
            <div class="product-price">
              <div class="price-label">정가</div>
              <div class="price-amount" id="selectedProductPrice">400,000원</div>
            </div>
          </div>
        </section>

        <!-- 2단계: 할인 혜택 -->
        <section class="payment-section">
          <div class="section-header">
            <div class="section-number">2</div>
            <h2 class="section-title">할인 혜택</h2>
          </div>
          <div class="duration-section">
            <div class="duration-options">
              <div class="duration-item">
                <input type="radio" id="duration1" name="duration" value="1" data-discount="0" checked>
                <label for="duration1" class="duration-label">
                  <div class="duration-badge">1개월</div>
                  <div class="duration-info">
                    <div class="duration-name">단기 이용</div>
                    <div class="duration-desc">할인 없음</div>
                    <div class="duration-monthly">월 400,000원</div>
                  </div>
                  <div class="duration-discount">할인없음</div>
                </label>
              </div>
              
              <div class="duration-item">
                <input type="radio" id="duration3" name="duration" value="3" data-discount="5">
                <label for="duration3" class="duration-label">
                  <div class="duration-badge">3개월</div>
                  <div class="duration-info">
                    <div class="duration-name">3개월 약정</div>
                    <div class="duration-desc">5% 할인 혜택</div>
                    <div class="duration-monthly">월 380,000원</div>
                  </div>
                  <div class="duration-discount">5% 할인</div>
                </label>
              </div>
              
              <div class="duration-item recommended">
                <input type="radio" id="duration6" name="duration" value="6" data-discount="33">
                <label for="duration6" class="duration-label">
                  <div class="duration-badge">6개월</div>
                  <div class="duration-info">
                    <div class="duration-name">장기 이용</div>
                    <div class="duration-desc big-discount">💥 33% 대폭 할인</div>
                    <div class="duration-monthly">월 268,000원</div>
                  </div>
                  <div class="duration-discount">33% 할인</div>
                </label>
                <div class="recommended-badge">추천</div>
              </div>
            </div>
            
            <div class="duration-info-text">
              <div class="discount-callout">
                <span class="callout-icon">💡</span>
                <span class="callout-text">
                  <strong>장기 약정할수록</strong> 더 많은 <strong>할인 혜택</strong>을 받을 수 있습니다.
                  <span class="callout-badge">추천: 6개월</span>
                </span>
              </div>
            </div>
          </div>
        </section>

        <!-- 3단계: 결제 금액 -->
        <section class="payment-section">
          <div class="section-header">
            <div class="section-number">3</div>
            <h2 class="section-title">결제 금액</h2>
          </div>
          <div class="payment-summary">
            <div class="summary-breakdown">
              <div class="summary-row">
                <span>기본 상품 금액</span>
                <span class="amount" id="baseProductAmount">400,000원 × 1개월</span>
              </div>
              <div class="summary-row discount-row" id="durationDiscountRow" style="display: none;">
                <span id="durationDiscountLabel">기간 할인 (5%)</span>
                <span class="amount discount" id="durationDiscount">-0원</span>
              </div>
              <div class="summary-row discount-row">
                <span>쿠폰 할인</span>
                <span class="amount discount" id="appliedCouponDiscount">-0원</span>
              </div>
              <div class="summary-row discount-row" id="subscriptionDiscountRow" style="display: none;">
                <span>정기결제 할인 (3%)</span>
                <span class="amount discount" id="subscriptionDiscount">-0원</span>
              </div>
              <div class="summary-divider"></div>
              <div class="summary-row total-row">
                <span>최종 결제금액</span>
                <span class="total-amount" id="finalAmount">400,000원</span>
              </div>
            </div>
            
            <!-- 인라인 쿠폰 선택 -->
            <div class="coupon-inline">
              <label for="couponSelect" class="coupon-inline__label">사용 가능한 금액 쿠폰</label>
              <div class="coupon-inline__control">
                <select id="couponSelect" class="coupon-inline__select">
                  <!-- JS에서 옵션 주입 -->
                </select>
                <span id="couponInlineAmount" class="coupon-inline__amount">-0원</span>
              </div>
            </div>
            
            <!-- 쿠폰 사용 (레거시 - 숨김 처리) -->
            <div class="coupon-section legacy-hidden">
              <h4 class="coupon-section-title">쿠폰 사용</h4>
              <div class="coupon-search">
                <input type="text" class="coupon-input" id="couponCodeInput" placeholder="쿠폰 코드를 입력하세요">
                <button type="button" class="coupon-apply-btn" id="applyCouponBtn">적용</button>
              </div>
              
              <div class="available-coupons">
                <div class="coupon-item">
                  <input type="radio" id="coupon1" name="coupon" value="10" data-discount="40000">
                  <label for="coupon1" class="coupon-label">
                    <div class="coupon-badge">10%</div>
                    <div class="coupon-info">
                      <div class="coupon-name">신규 가입 할인 쿠폰</div>
                      <div class="coupon-desc">첫 구매 시 10% 할인 (최대 4만원)</div>
                    </div>
                    <div class="coupon-discount">-40,000원</div>
                  </label>
                </div>
                
                <div class="coupon-item">
                  <input type="radio" id="coupon2" name="coupon" value="50000" data-discount="50000">
                  <label for="coupon2" class="coupon-label">
                    <div class="coupon-badge">5만원</div>
                    <div class="coupon-info">
                      <div class="coupon-name">이벤트 할인 쿠폰</div>
                      <div class="coupon-desc">특가 이벤트 5만원 할인</div>
                    </div>
                    <div class="coupon-discount">-50,000원</div>
                  </label>
                </div>
                
                <div class="coupon-item">
                  <input type="radio" id="noCoupon" name="coupon" value="0" checked>
                  <label for="noCoupon" class="coupon-label">
                    <div class="coupon-badge no-coupon">✕</div>
                    <div class="coupon-info">
                      <div class="coupon-name">쿠폰 사용 안함</div>
                      <div class="coupon-desc">쿠폰을 사용하지 않습니다</div>
                    </div>
                    <div class="coupon-discount">-0원</div>
                  </label>
                </div>
              </div>
              
              <div class="coupon-actions">
                <button type="button" class="btn-coupon" id="viewCouponsBtn">
                  보유 쿠폰 확인하기
                </button>
              </div>
            </div>
            
            <!-- 정기결제 옵션 -->
            <div class="subscription-option">
              <div class="subscription-toggle">
                <input type="checkbox" id="subscriptionCheckbox" class="subscription-checkbox" checked>
                <label for="subscriptionCheckbox" class="subscription-label">
                  <div class="subscription-info">
                    <div class="subscription-title">
                      <span class="subscription-icon">🔄</span>
                      정기결제 신청하기
                    </div>
                    <div class="subscription-desc">
                      매월 자동 결제로 편리하게 이용하고 3% 할인 혜택도 받으세요
                    </div>
                  </div>
                  <div class="toggle-switch">
                    <div class="toggle-slider"></div>
                  </div>
                </label>
              </div>
              <div class="subscription-benefits" id="subscriptionBenefits" style="display: none;">
                <div class="benefit-item">
                  <span class="benefit-icon">💰</span>
                  <span class="benefit-text">매월 3% 할인 (최대 연간 50만원 절약)</span>
                </div>
                <div class="benefit-item">
                  <span class="benefit-icon">⚡</span>
                  <span class="benefit-text">자동 연장으로 서비스 중단 없음</span>
                </div>
                <div class="benefit-item">
                  <span class="benefit-icon">🎯</span>
                  <span class="benefit-text">언제든지 해지 가능</span>
                </div>
              </div>
            </div>

            <!-- 결제 버튼 -->
            <div class="payment-actions">
              <button class="btn btn-primary payment-btn" id="proceedPaymentBtn">
                <span class="btn-amount" id="paymentBtnAmount">400,000원</span>
                <span class="btn-type" id="paymentBtnType">결제하기</span>
              </button>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- 상품 검색 모달 -->
  <div class="modal" id="productSearchModal">
    <div class="modal-content product-search-modal">
      <div class="modal-header">
        <h3 class="modal-title">광고 상품 선택</h3>
        <button class="modal-close" id="closeProductModal">×</button>
      </div>
      <div class="modal-body">
        <!-- 검색 섹션 -->
        <div class="search-section">
          <div class="search-input-container">
            <input type="text" class="search-input" id="productSearchInput" 
                   placeholder="지역, 역명을 검색해보세요 (예: 강남역, 강남구)">
            <button class="search-btn" id="searchBtn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19S2 15.194 2 10.5 5.806 2 10.5 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- 검색 결과 -->
        <div class="search-results" id="searchResults" style="display: none;">
          <h4 class="results-title">검색 결과</h4>
          <div class="result-list">
            <div class="result-item" data-product="gangnam-premium">
              <div class="result-icon">🏢</div>
              <div class="result-info">
                <div class="result-name">강남역 프리미엄 광고</div>
                <div class="result-desc">강남역 근처 상가 임대차 광고</div>
                <div class="result-location">서울시 강남구 강남역</div>
              </div>
              <div class="result-price">400,000원/월</div>
            </div>
          </div>
        </div>

        <!-- 추천 상품 -->
        <div class="recommended-section">
          <h4 class="section-subtitle">추천 상품</h4>
          <div class="recommended-list">
            <div class="recommended-item" data-product="gangnam-basic">
              <div class="recommended-image">
                <div class="image-placeholder small">📊</div>
              </div>
              <div class="recommended-info">
                <div class="recommended-name">강남구 일반 광고</div>
                <div class="recommended-desc">강남구 전체 지역 광고</div>
                <div class="recommended-location">서울시 강남구</div>
                <div class="recommended-price">250,000원/월</div>
              </div>
              <button class="select-recommended-btn">선택</button>
            </div>

            <div class="recommended-item" data-product="seocho-premium">
              <div class="recommended-image">
                <div class="image-placeholder small">🏬</div>
              </div>
              <div class="recommended-info">
                <div class="recommended-name">서초역 프리미엄 광고</div>
                <div class="recommended-desc">서초역 근처 상업지구 광고</div>
                <div class="recommended-location">서울시 서초구 서초역</div>
                <div class="recommended-price">380,000원/월</div>
              </div>
              <button class="select-recommended-btn">선택</button>
            </div>

            <div class="recommended-item" data-product="sinsa-special">
              <div class="recommended-image">
                <div class="image-placeholder small">🛍️</div>
              </div>
              <div class="recommended-info">
                <div class="recommended-name">신사동 특화 광고</div>
                <div class="recommended-desc">신사동 가로수길 맛집거리 광고</div>
                <div class="recommended-location">서울시 강남구 신사동</div>
                <div class="recommended-price">450,000원/월</div>
              </div>
              <button class="select-recommended-btn">선택</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 결제 진행 모달 -->
  <div class="modal" id="paymentModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">결제 진행 중</h3>
      </div>
      <div class="modal-body">
        <div class="payment-progress">
          <div class="progress-icon">
            <div class="loading-spinner"></div>
          </div>
          <p class="progress-text">결제를 처리하고 있습니다...</p>
          <p class="progress-subtext">잠시만 기다려주세요.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 결제 완료 모달 -->
  <div class="modal" id="successModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">결제 완료</h3>
        <button class="modal-close" id="closeSuccessModal">×</button>
      </div>
      <div class="modal-body">
        <div class="success-content">
          <div class="success-icon">✅</div>
          <h4>결제가 완료되었습니다!</h4>
          <p>네모 프리미엄 광고 상품이 활성화되었습니다.</p>
          <div class="success-info">
            <p><strong>결제 금액:</strong> <span id="paidAmount">400,000원</span></p>
            <p><strong>결제 일시:</strong> <span id="paymentDate"></span></p>
            <p><strong>결제 방법:</strong> <span id="paymentMethod">신용카드</span></p>
          </div>
          <div class="success-actions">
            <button class="btn btn-primary" onclick="location.href='index.html'">
              메인으로 돌아가기
            </button>
            <button class="btn btn-secondary" onclick="window.print()">
              영수증 출력
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="scripts/payment_new.js"></script>
</body>
</html>